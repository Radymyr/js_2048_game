function t(t){return t.map(t=>[...t])}const i=new class{initialStateDefault=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];count=4;score=0;status="idle";constructor(i=this.initialStateDefault){this.initialState=t(i),this.initialStateDefault=t(i)}checkVictory(){this.initialState.flat().find(t=>2048===t)&&(this.status="win")}moveLeft(){if(!this.isStatusPlaying())return;let t=!1;for(let i=0;i<this.count;i++)for(let e=0;e<this.count;e++)for(let a=e+1;a<this.count;a++){let s=this.initialState[i][e],n=this.initialState[i][a];if(0===s&&0!==n){this.initialState[i][e]=n,this.initialState[i][a]=0,t=!0;continue}if(0!==s&&n===s){let n=2*s;this.initialState[i][e]=n,this.initialState[i][a]=0,this.score+=n,t=!0;break}if((0===s||0!==n)&&0!==s&&n!==s)break}t&&(this.transposeState(),this.checkVictory())}moveRight(){if(!this.isStatusPlaying())return;let t=!1;for(let i=0;i<this.count;i++)for(let e=this.count-1;e>=0;e--)for(let a=e-1;a>=0;a--){let s=this.initialState[i][e],n=this.initialState[i][a];if(0===s&&0!==n){this.initialState[i][e]=n,this.initialState[i][a]=0,t=!0;continue}if(0!==s&&n===s){let n=2*s;this.initialState[i][e]=n,this.initialState[i][a]=0,this.score+=n,t=!0;break}if(0!==s&&0===n||0!==s&&n!==s)break}t&&(this.transposeState(),this.checkVictory())}moveUp(){if(!this.isStatusPlaying())return;let t=!1;for(let i=0;i<this.count;i++)for(let e=0;e<this.count;e++)for(let a=e+1;a<this.count;a++){let s=this.initialState[e][i],n=this.initialState[a][i];if(0===s&&0!==n){this.initialState[e][i]=n,this.initialState[a][i]=0,t=!0;continue}if(0!==s&&n===s){let n=2*s;this.initialState[e][i]=n,this.initialState[a][i]=0,this.score+=n,t=!0;break}if((0===s||0!==n)&&0!==s&&n!==s)break}t&&(this.transposeState(),this.checkVictory())}moveDown(){if(!this.isStatusPlaying())return;let t=!1;for(let i=0;i<this.count;i++)for(let e=this.count-1;e>=0;e--)for(let a=e-1;a>=0;a--){let s=this.initialState[e][i],n=this.initialState[a][i];if(0===s&&0!==n){this.initialState[e][i]=n,this.initialState[a][i]=0,t=!0;continue}if(0!==s&&n===s){let n=2*s;this.initialState[e][i]=n,this.initialState[a][i]=0,this.score+=n,t=!0;break}if((0===s||0!==n)&&0!==s&&n!==s)break}t&&(this.transposeState(),this.checkVictory())}getScore(){return this.score}isStatusPlaying(){return"playing"===this.status}getState(){return this.initialState}getStatus(){return this.status}start(){"playing"!==this.status&&(this.transposeState(),this.transposeState(),this.status="playing")}restart(){this.initialState=this.initialStateDefault,this.status="idle",this.score=0}generateNewNumber(){return .9>Math.random()?2:4}get count(){return this.initialState.flat().filter(t=>!t).length}getRandomNumber(){return Math.floor(Math.random()*this.count)+1}transposeState(){let t=this.getRandomNumber(),i=0;for(let e=0;e<4;e++)for(let a=0;a<4;a++){if(0===this.initialState[a][e]){let s=++i===t?this.generateNewNumber():0;this.initialState[a][e]=s;continue}this.initialState[a][e]=this.initialState[a][e]}}};function e(){i.getState().forEach((t,i)=>{t.forEach((t,e)=>{let a=document.querySelectorAll(".field-row")[i].children[e];a.innerText=t,a.className="",a.classList.add("field-cell",`field-cell--${t}`)})})}window.game=i,document.querySelector(".start").addEventListener("click",()=>{i.start(),e()}),document.addEventListener("keydown",({key:t})=>{"ArrowLeft"===t&&i.moveLeft(),"ArrowRight"===t&&i.moveRight(),"ArrowUp"===t&&i.moveUp(),"ArrowDown"===t&&i.moveDown(),document.querySelector(".game-score").innerText=i.getScore(),e()});
//# sourceMappingURL=index.3e3f4247.js.map
